import{_ as x,R as w,a as C,m as R,b as _,r as m,o,c as n,d as t,e as c,w as l,f,g as T,v as L,F as v,h as g,i as S,t as r,j as V,k as d}from"./index-4a5991fe.js";import{S as N,c as u}from"./cart-e0fee3b9.js";const{VITE_URL:P,VITE_PATH:j}={VITE_URL:"https://vue3-course-api.hexschool.io/",VITE_PATH:"tomyalan978",BASE_URL:"/vite-deploy-2",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E={data(){return{products:[],fullPage:!1,product_id:"",searchText:"",productName:[],showRecommendations:!1,foundProductArray:[]}},components:{RouterView:w,RouterLink:C},computed:{...R(u,["carts","cartList","cartNum"]),filteredProduct(){return this.productName.filter(e=>e.toLowerCase().includes(this.searchText.toLocaleLowerCase()))}},methods:{..._(u,["getCart"]),..._(u,["deleteItem"]),..._(u,["adjustmentTicket"]),..._(u,["cartCount"]),getProducts(){this.$http(`${P}/v2/api/${j}/products/all`).then(e=>{console.log(e),this.products=e.data.products,this.productName=this.products.map(a=>a.title)})},search(){this.searchText===""?this.showRecommendations=!1:this.showRecommendations=!0},searchName(){let e=this.searchText,a=this.products.find(h=>h.title===e);a?(this.product_id=a.id,this.$router.push({name:"product-detail",params:{id:`${this.product_id}`}})):N.fire({position:"top-end",title:"找不到該產品",showConfirmButton:!1,timer:1500})},updateSearchQuery(e){this.searchText=e;let a=this.products.find(h=>h.title===this.searchText);a&&(this.product_id=a.id,this.$router.push({name:"product-detail",params:{id:this.product_id}})),this.showRecommendations=!1},routerLook(){this.$router.push({path:"/products"})}},mounted(){this.getProducts(),this.getCart()}},I={class:"navbar navbar-expand-lg navbar-light bg-primary"},A={class:"container"},B=t("a",{class:"navbar-brand",href:"#"},"Navbar",-1),D=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),U={class:"collapse navbar-collapse",id:"navbarSupportedContent"},$={class:"navbar-nav me-auto mb-2 mb-lg-0"},F={class:"nav-item"},M={class:"nav-item"},q={key:0,class:"list-group active"},H=["onClick"],O=t("button",{class:"btn btn-outline-success me-1",type:"submit"},"Search",-1),Q={class:"btn btn-primary border-none position-relative",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight"},z=t("i",{class:"bi bi-bag"},null,-1),G={class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"},J={class:"offcanvas offcanvas-end overflow-auto vl-parent",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",ref:"formContainer"},K=t("div",{class:"offcanvas-header border-bottom bg-success text-white"},[t("h5",{id:"offcanvasRightLabel "}," 購物車 "),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),W={key:0,class:"offcanvas-body bg-primary text-center"},X=t("h5",{class:"text-center"},"購物車沒有品項",-1),Y={key:1,class:"offcanvas-body bg-primary"},Z={class:"list-unstyled"},tt={class:"w-25"},st=["src"],et={class:"w-75 ms-3"},at={class:"h6 mb-1"},ot=t("p",{class:"fw-bold text-dark"},null,-1),nt={class:"d-flex justify-content-between align-items-end"},it={class:"fw-bold"},ct=["onClick"],lt=t("i",{class:"bi bi-dash fs-6"},null,-1),rt=[lt],dt={class:"fs-6"},ut=["onClick"],ht=t("i",{class:"bi bi-plus fs-6"},null,-1),pt=[ht],_t=["onClick"],ft=t("i",{class:"bi bi-trash"},null,-1),bt=[ft],mt={class:"mt-auto overflow-auto"},vt={class:"offcavans-footer","data-bs-dismiss":"offcanvas","aria-label":"Close"},gt={class:"py-3"},yt=V('<footer class="py-5 text-light bg-primary"><ul class="list-unstyled d-flex justify-content-center"><li><a class="pe-3 link-warning" href="#"><i class="fab h5 fa-facebook"></i></a></li><li><a class="pe-3 link-warning" href="#"><i class="fab h5 fa-instagram"></i></a></li><li><a class="pe-3 link-warning" href="#"><i class="fab h5 fa-twitter-square"></i></a></li><li><a class="pe-3 link-warning" href="#"><i class="fas h5 fa-envelope"></i></a></li></ul></footer>',1),kt={class:"d-flex flex-column text-primary justify-content-center align-items-center p-2 bg-success"},xt=t("span",{class:"me-4"}," 僅個人作品使用，無任何商業用途 ",-1),wt={class:"d-flex"},Ct=t("div",null,"Copyright © 2023 星杯冰淇淋|",-1);function Rt(e,a,h,Tt,b,i){const p=m("RouterLink"),y=m("RouterView"),k=m("Router-link");return o(),n(v,null,[t("nav",I,[t("div",A,[B,D,t("div",U,[t("ul",$,[t("li",F,[c(p,{class:"nav-link",to:"/"},{default:l(()=>[d("首頁")]),_:1})]),t("li",M,[c(p,{class:"nav-link",to:"/products"},{default:l(()=>[d("產品")]),_:1})])]),t("form",{class:"d-flex search-container",onSubmit:a[2]||(a[2]=f(s=>i.searchName(),["prevent"]))},[T(t("input",{class:"form-control me-2 input-container",type:"search",placeholder:"Search","onUpdate:modelValue":a[0]||(a[0]=s=>b.searchText=s),onInput:a[1]||(a[1]=(...s)=>i.search&&i.search(...s)),"aria-label":"Search"},null,544),[[L,b.searchText]]),b.showRecommendations?(o(),n("ul",q,[(o(!0),n(v,null,g(i.filteredProduct,s=>(o(),n("li",{key:s,class:"list-group-item"},[t("button",{onClick:Lt=>i.updateSearchQuery(s)},r(s),9,H)]))),128))])):S("",!0),O],32),t("button",Q,[z,t("span",G,r(e.cartNum),1)])])])]),t("div",J,[K,e.carts.length===0?(o(),n("div",W,[X,t("a",{href:"#",class:"btn btn-to-shop btn-outline bg-success text-white px-7 mt-4",onClick:a[3]||(a[3]=s=>i.routerLook()),"data-bs-dismiss":"offcanvas"},"來去看看")])):(o(),n("div",Y,[t("ul",Z,[(o(!0),n(v,null,g(e.carts,s=>(o(),n("li",{class:"d-flex align-items-center py-4 px-3 border-bottom",key:s.id},[t("div",tt,[t("img",{src:s.product.imageUrl,style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,st)]),t("div",et,[t("h4",at,r(s.product.title),1),ot,t("div",nt,[t("div",it,[t("a",{href:"#",class:"pe-2 text-success",type:"btn",onClick:f(()=>e.adjustmentTicket("-",s),["prevent"])},rt,8,ct),t("span",dt,r(s.qty),1),t("a",{href:"#",class:"ps-2 text-success",type:"btn",onClick:f(()=>e.adjustmentTicket("+",s),["prevent"])},pt,8,ut)]),t("button",{type:"button",class:"btn btn-outline-success",onClick:f(()=>e.deleteItem(s),["prevent"])},bt,8,_t)])])]))),128))]),t("div",mt,[t("div",vt,[t("h4",gt," 總共: "+r(e.cartList.a),1),c(p,{class:"btn btn-outline-success btn-lg w-100 mb-3",to:"/cart"},{default:l(()=>[d("購物車")]),_:1}),c(p,{class:"btn btn-success btn-lg w-100 text-white",to:"/form"},{default:l(()=>[d(" 直接購買")]),_:1})])])]))],512),c(y),yt,t("div",kt,[xt,t("div",wt,[Ct,c(k,{to:"/login"},{default:l(()=>[d("後台登入")]),_:1})])])],64)}const Nt=x(E,[["render",Rt]]);export{Nt as default};
